STEP BY STEP SOLUTION FOR P1-(2a)

Calibration data provided (b-frame) :

 Sensor       x1(m)          x2(m)          x3(m)        alpha(deg)      beta(deg)     gamma(deg)  Code  
-------   ------------   ------------   ------------  -------------  -------------  ------------- ------
      0         0.0000         0.0000         0.0000     0.00000000     0.00000000     0.00000000   PLA
      1         0.0000         0.0000        -0.0250     0.26356800    -0.43797400     2.86921400   INS
      2         0.4000        -0.4000        -0.0150     0.00000000     0.00000000     0.00000000   REC2
      3         0.4000         0.4000        -0.0150     0.00000000     0.00000000     0.00000000   REC3
      4        -0.4000        -0.4000        -0.0150     0.00000000     0.00000000     0.00000000   REC4
      5        -0.4000         0.4000        -0.0150     0.00000000     0.00000000     0.00000000   REC5
      6         0.7000        -0.1500        -0.0800     0.19654300     0.54167400    -1.35584700   CAM1
      7         0.7000         0.1500        -0.0800    -0.28749500     0.42658800     1.12879200   CAM2

Prior rotation, the b-frame has to be translated to the device providing the navigation angles (3):

b-frame translated to device (3)

Translated vectors :

Sensor        x1(m)          x2(m)          x3(m)      Code
-------   ------------   ------------   ------------
      0        -0.4000        -0.4000         0.0150   PLA
      1        -0.4000        -0.4000        -0.0100   INS
      2         0.0000        -0.8000         0.0000   REC2
      3         0.0000         0.0000         0.0000   REC3
      4        -0.8000        -0.8000         0.0000   REC4
      5        -0.8000         0.0000         0.0000   REC5
      6         0.3000        -0.5500        -0.0650   CAM1
      7         0.3000        -0.2500        -0.0650   CAM2

Navigation angles provided:

       roll  =     1.0345967928 deg
       pitch =     2.5550931671 deg
       yaw   =   112.2847460977 deg

NOTE: since they transform from the n-frame(NED) centered in sensor number 3 to the b-frame,
      their sign has to be changed to transform from the b-frame to the n-frame(NED).

----------------------------------------
Rotation from the b-frame to the n-frame
----------------------------------------

Matrix rotation from the b-frame to the n-frame(NED):

Euler angles :

a1 =   -1.0345967928 deg =   -1.1495519920 gon =   -0.0180571205 rad
a2 =   -2.5550931671 deg =   -2.8389924079 gon =   -0.0445947885 rad
a3 = -112.2847460977 deg = -124.7608289974 gon =   -1.9597385192 rad

Rotation matrix :

   -0.3788328229   -0.9254651016   -0.0001948826
    0.9243907805   -0.3784031837    0.0480907003
   -0.0445800090    0.0180381881    0.9988429539

n-frame vectors with origin in device (3)

Sensor        x1(m)          x2(m)          x3(m)      Code
-------   ------------   ------------   ------------
      0         0.5217        -0.2177         0.0256   PLA
      1         0.5217        -0.2189         0.0006   INS
      2         0.7404         0.3027        -0.0144   REC2
      3         0.0000         0.0000         0.0000   REC3
      4         1.0434        -0.4368         0.0212   REC4
      5         0.3031        -0.7395         0.0357   REC5
      6         0.3954         0.4823        -0.0882   CAM1
      7         0.1177         0.3688        -0.0828   CAM2

----------------------------------------
Rotation from the n-frame to the e-frame
----------------------------------------

By using the e-frame coordinates of the device (3):

     Xo  =       4929476.4033 m   Yo  =        -28862.0004 m  Zo  =    4033747.0145 m
     lat =    39º28'53.10989"     lon =   - 0º20' 7.66313"    hel =         55.8290 m

which provide the following rotation from the n-frame(NED) to the e-frame :


Rotation matrix :

   -0.6358170568    0.0058548826   -0.7718175890
    0.0037226980    0.9999828600    0.0045189788
    0.7718308182    0.0000000000   -0.6358279548

Euler angles :

a1 = -180.0000000000 deg = -200.0000000000 gon =   -3.1415926536 rad
a2 =   50.5185805875 deg =   56.1317562083 gon =    0.8817155647 rad
a3 = -179.6645380197 deg = -199.6272644664 gon =   -3.1357377375 rad

Resulting e-frame vectors with origin in device (3)

Sensor        x1(m)          x2(m)          x3(m)      Code
-------   ------------   ------------   ------------
      0        -0.3527        -0.2156         0.3864   PLA
      1        -0.3335        -0.2169         0.4023   INS
      2        -0.4578         0.3054         0.5806   REC2
      3         0.0000         0.0000         0.0000   REC3
      4        -0.6824        -0.4328         0.7919   REC4
      5        -0.2246        -0.7382         0.2112   REC5
      6        -0.1805         0.4834         0.3613   CAM1
      7        -0.0088         0.3688         0.1435   CAM2

The e-frame has to be translated to the device whose coordinates in the e-frame are known (3):



Translated vectors :

Sensor        x1(m)          x2(m)          x3(m)      Code
-------   ------------   ------------   ------------
      0        -0.3527        -0.2156         0.3864   PLA
      1        -0.3335        -0.2169         0.4023   INS
      2        -0.4578         0.3054         0.5806   REC2
      3         0.0000         0.0000         0.0000   REC3
      4        -0.6824        -0.4328         0.7919   REC4
      5        -0.2246        -0.7382         0.2112   REC5
      6        -0.1805         0.4834         0.3613   CAM1
      7        -0.0088         0.3688         0.1435   CAM2

Finally, the e-frame has to be translated from the device (3) to the Earth's center by using
the ECEF coordinates of that device:

     Xo  =       4929476.4033 m   Yo  =        -28862.0004 m  Zo  =    4033747.0145 m



Translated vectors :

Sensor        x1(m)          x2(m)          x3(m)      Code
-------   ------------   ------------   ------------
      0   4929476.0506    -28862.2160   4033747.4009   PLA
      1   4929476.0698    -28862.2173   4033747.4167   INS
      2   4929475.9455    -28861.6950   4033747.5951   REC2
      3   4929476.4033    -28862.0004   4033747.0145   REC3
      4   4929475.7209    -28862.4332   4033747.8063   REC4
      5   4929476.1788    -28862.7386   4033747.2257   REC5
      6   4929476.2229    -28861.5170   4033747.3757   CAM1
      7   4929476.3945    -28861.6316   4033747.1580   CAM2

-----------------
Final coordinates
-----------------



e-frame ECEF coordinates (ETRS89) of all sensors :

Sensor        x1(m)          x2(m)          x3(m)      Code
-------   ------------   ------------   ------------
      0   4929476.0506    -28862.2160   4033747.4009   PLA
      1   4929476.0698    -28862.2173   4033747.4167   INS
      2   4929475.9455    -28861.6950   4033747.5951   REC2
      3   4929476.4033    -28862.0004   4033747.0145   REC3
      4   4929475.7209    -28862.4332   4033747.8063   REC4
      5   4929476.1788    -28862.7386   4033747.2257   REC5
      6   4929476.2229    -28861.5170   4033747.3757   CAM1
      7   4929476.3945    -28861.6316   4033747.1580   CAM2

e-frame geodetic coordinates (ETRS89) of all sensors :

Sensor         Latitude           Longitude        h.ell(m)      N (m)    Code
-------     ---------------    ----------------   ---------    --------  
      0     39º28'53.12680"    - 0º20' 7.67224"     55.8034     50.0166   PLA
      1     39º28'53.12680"    - 0º20' 7.67229"     55.8284     50.0166   INS
      2     39º28'53.13389"    - 0º20' 7.65046"     55.8434     50.0166   REC2
      3     39º28'53.10989"    - 0º20' 7.66313"     55.8290     50.0166   REC3
      4     39º28'53.14372"    - 0º20' 7.68141"     55.8078     50.0166   REC4
      5     39º28'53.11971"    - 0º20' 7.69407"     55.7933     50.0166   REC5
      6     39º28'53.12270"    - 0º20' 7.64295"     55.9172     50.0166   CAM1
      7     39º28'53.11370"    - 0º20' 7.64770"     55.9118     50.0166   CAM2

e-frame TMzn  coordinates (ETRS89) of all sensors :

Sensor          E              N       zn    H.or(m)    Code
-------    -----------   ------------  --  ----------    
      0    729171.0929   4373592.4912  30      5.7868   PLA
      1    729171.0917   4373592.4912  30      5.8118   INS
      2    729171.6067   4373592.7252  30      5.8269   REC2
      3    729171.3260   4373591.9760  30      5.8124   REC3
      4    729170.8584   4373593.0063  30      5.7912   REC4
      5    729170.5777   4373592.2571  30      5.7767   REC5
      6    729171.7965   4373592.3856  30      5.9006   CAM1
      7    729171.6912   4373592.1046  30      5.8952   CAM2

Verification by using the initial GNSS coordinates. Differences expresed in ETRS89-TM(30): 

Sensor           x1(m)          x2(m)          x3(m)   Code
-------      ----------     ----------     ----------  
      2        -0.0118        -0.0082         0.0000   REC2
      3         0.0000         0.0000         0.0000   REC3
      4         0.0116        -0.0053         0.0000   REC4
      5         0.0063        -0.0072         0.0000   REC5

