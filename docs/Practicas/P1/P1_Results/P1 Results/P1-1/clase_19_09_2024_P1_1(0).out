STEP BY STEP SOLUTION FOR P1-(1)

Calibration data provided (b-frame) :

 Sensor       x1(m)          x2(m)          x3(m)        alpha(deg)      beta(deg)     gamma(deg)  Code  
-------   ------------   ------------   ------------  -------------  -------------  ------------- ------
      0         0.0000         0.0000         0.0000     0.00000000     0.00000000     0.00000000   PLA
      1         0.0000         0.0000        -0.0250     0.26356800    -0.43797400     2.86921400   INS
      2         0.4000        -0.4000        -0.0150     0.00000000     0.00000000     0.00000000   REC2
      3         0.4000         0.4000        -0.0150     0.00000000     0.00000000     0.00000000   REC3
      4        -0.4000        -0.4000        -0.0150     0.00000000     0.00000000     0.00000000   REC4
      5        -0.4000         0.4000        -0.0150     0.00000000     0.00000000     0.00000000   REC5
      6         0.7000        -0.1500        -0.0800     0.19654300     0.54167400    -1.35584700   CAM1
      7         0.7000         0.1500        -0.0800    -0.28749500     0.42658800     1.12879200   CAM2

Coordinates provided by the four GNSS receivers:

e-frame ECEF coordinates (ETRS89) of all sensors :

Sensor        x1(m)          x2(m)          x3(m)      Code
-------   ------------   ------------   ------------
      2   4929475.9686    -28861.7071   4033747.6040   REC2
      3   4929476.4033    -28862.0004   4033747.0145   REC3
      4   4929475.7827    -28862.4222   4033747.8498   REC4
      5   4929476.2396    -28862.7329   4033747.2662   REC5

e-frame geodetic coordinates (ETRS89) of all sensors :

Sensor         Latitude           Longitude        h.ell(m)      N (m)    Code
-------     ---------------    ----------------   ---------    --------  
      2     39º28'53.13364"    - 0º20' 7.65096"     55.8670     50.0166   REC2
      3     39º28'53.10989"    - 0º20' 7.66313"     55.8290     50.0166   REC3
      4     39º28'53.14354"    - 0º20' 7.68093"     55.8830     50.0166   REC4
      5     39º28'53.11947"    - 0º20' 7.69382"     55.8660     50.0166   REC5

e-frame TMzn  coordinates (ETRS89) of all sensors :

Sensor          E              N       zn    H.or(m)    Code
-------    -----------   ------------  --  ----------    
      2    729171.5950   4373592.7170  30      5.8504   REC2
      3    729171.3260   4373591.9760  30      5.8124   REC3
      4    729170.8700   4373593.0010  30      5.8664   REC4
      5    729170.5840   4373592.2500  30      5.8494   REC5

e-frame coordinates of the selected point as origin:

     -2  Xo  =       4929476.0985 m   Yo  =        -28862.2156 m  Zo  =    4033747.4336 m
     -2  lat =    39º28'53.12663"     lon =   - 0º20' 7.67221"    hel =         55.8612 m

Applying translation to set the the average point as origin of the e-frame to n-frame(NED) rotation

Translated vectors :

Sensor        x1(m)          x2(m)          x3(m)      Code
-------   ------------   ------------   ------------
      2        -0.1299         0.5085         0.1704   REC2
      3         0.3048         0.2152        -0.4192   REC3
      4        -0.3159        -0.2065         0.4162   REC4
      5         0.1410        -0.5172        -0.1674   REC5



Rotation matrix :

   -0.6358171193    0.0037227264    0.7718307665
    0.0058549266    0.9999828598    0.0000000000
   -0.7718175372    0.0045190125   -0.6358280175

Euler angles :

a1 = -179.5927892792 deg = -199.5475436436 gon =   -3.1344854858 rad
a2 =  -50.5173838257 deg =  -56.1304264730 gon =   -0.8816946773 rad
a3 = -179.4724063033 deg = -199.4137847814 gon =   -3.1323844065 rad

Computing rotation from the n-frame to the b-frame(NED)

Sensor        x1(m)          x2(m)          x3(m)      Code
-------   ------------   ------------   ------------
      2         0.2160         0.5077        -0.0058   REC2
      3        -0.5165         0.2170         0.0323   REC3
      4         0.5213        -0.2084        -0.0218   REC4
      5        -0.2208        -0.5164        -0.0047   REC5

Common points detected :

     Point       x1(m)          x2(m)          x3(m)           x1(m)          x2(m)          x3(m)     code
             ------------------------------------------  -------------------------------------------
         2         0.2160         0.5077        -0.0058         0.4000        -0.4000        -0.0150   REC2
         3        -0.5165         0.2170         0.0323         0.4000         0.4000        -0.0150   REC3
         4         0.5213        -0.2084        -0.0218        -0.4000        -0.4000        -0.0150   REC4
         5        -0.2208        -0.5164        -0.0047        -0.4000         0.4000        -0.0150   REC5

Computing 3D rotation matrix from the n-frame(NED) to b-frame

     Point       x1(m)          x2(m)          x3(m)           x1(m)          x2(m)          x3(m)     code
             ------------------------------------------  -------------------------------------------
         2         0.2160         0.5077        -0.0058         0.4000        -0.4000        -0.0150   REC2
         3        -0.5165         0.2170         0.0323         0.4000         0.4000        -0.0150   REC3
         4         0.5213        -0.2084        -0.0218        -0.4000        -0.4000        -0.0150   REC4
         5        -0.2208        -0.5164        -0.0047        -0.4000         0.4000        -0.0150   REC5

Step (1) -> From-frame translation to the centroid (frx) :

Translated vectors :

Sensor        x1(m)          x2(m)          x3(m)      Code
-------   ------------   ------------   ------------
      2         0.2160         0.5077        -0.0058   REC2
      3        -0.5165         0.2170         0.0323   REC3
      4         0.5213        -0.2084        -0.0218   REC4
      5        -0.2208        -0.5164        -0.0047   REC5

Step (2) -> To-frame translation to the centroid (tox) :

Translated vectors :

Sensor        x1(m)          x2(m)          x3(m)      Code
-------   ------------   ------------   ------------
      2         0.4000        -0.4000         0.0000   PLA
      3         0.4000         0.4000         0.0000   INS
      4        -0.4000        -0.4000         0.0000   REC2
      5        -0.4000         0.4000         0.0000   REC3

Step (3) -> [U,S,V] = svd(tox*frx') :

Step (4) -> R = U*V' :

Vectors refered to the barycenter :

                                  from                                         to
             ------------------------------------------   ------------------------------------------
     Point         x1(m)          x2(m)          x3(m)          x1(m)          x2(m)          x3(m)    code

         2         0.2160         0.5077        -0.0058         0.4000        -0.4000         0.0000   REC2
         3        -0.5165         0.2170         0.0323         0.4000         0.4000         0.0000   REC3
         4         0.5213        -0.2084        -0.0218        -0.4000        -0.4000         0.0000   REC4
         5        -0.2208        -0.5164        -0.0047        -0.4000         0.4000         0.0000   REC5

Rotation matrix obtained by using singular value decomposition (svd) R = (U*V') :

Rotation matrix :

   -0.3788327942    0.9248546266    0.0336100227
   -0.9243907884   -0.3798928035    0.0343966316
    0.0445800896   -0.0180382233    0.9988429497

Euler angles :

a1 =    1.0345988149 deg =    1.1495542388 gon =    0.0180571558 rad
a2 =    2.5550977895 deg =    2.8389975439 gon =    0.0445948691 rad
a3 =  112.2847444085 deg =  124.7608271206 gon =    1.9597384897 rad

